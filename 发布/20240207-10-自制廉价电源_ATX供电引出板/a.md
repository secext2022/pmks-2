# 自制廉价电源: ATX 供电引出板

ATX 电源, 加上一块 12.5 元 (或 4.6 元) 的电路板,
即可获得 3.3V, 5V, 12V 供电.


## 目录

+ 1 需求分析

+ 2 电路板设计与打样

  - 2.1 电路板设计
  - 2.2 嘉立创打样
  - 2.3 电路板成本分析

+ 3 电路板功能及测试

  - 3.1 电源开关与指示灯
  - 3.2 12V (xt60) 和 5V (xt30) 插座
  - 3.3 5V USB-A 插座
  - 3.4 排针 2.54mm 间距
  - 3.5 螺丝孔 M2
  - 3.6 阻焊开窗 (堆锡) 和预留飞线位置 (大电流)
  - 3.7 扩展接口 (J-MCU)

+ 4 翻车

+ 5 总结与展望


## 1 需求分析

小功率电子设备通常使用直流供电, 3.3V, 5V, 12V 是很常用的电源电压.

比如有的显示器使用 12V 供电, 交换机 / 路由器 (家用) 使用 5V 供电,
香橙派使用 5V 供电, 单片机使用 3.3V / 5V 供电.
手机也可以使用 5V (USB) 充电 (慢速).

做电路小实验 (比如面包板) 也经常用到 3.3V / 5V 电压.

台式计算机主机的 ATX 电源, 能够同时输出 3.3V, 5V, 12V
(24 针主板供电接口), 并且供电能力很强 (功率大, 电流大).
如果把 ATX 电源的供电引出, 就能很方便的使用.

ATX 电源很常见, 并且有多种输出功率,
多种价格区间可供选择, 电源质量也比较有保障.
如果只需要一个普通的小功率电源, 甚至是二手的,
那么很便宜 (对穷人友好).
还可以使用淘汰的废旧计算机的电源, 二次利用.
如果预算不是很紧张, 想用大功率的好电源, 那也可以.

房间里的各种电子设备越来越多, 大部分都自带电源适配器,
把 220V 50Hz 的交流市电变成低压直流电.
一眼望去, 插座上密密麻麻满是电源适配器, 好烦 !
如果能用一个电源, 对全屋所有的小功率电子设备进行统一供电,
窝觉得挺好的.


## 2 电路板设计与打样

### 2.1 电路板设计

KiCad, 启动 !

![原理图](../图/20240207-10/2-kicad-1.jpg)

原理图很简单.
具有 ATX 24 针 (主板供电) 插座,
12V (xt60) 插座, 5V (xt30) 插座,
USB-A (5V) 插座, 2.54mm 排针,
以及电源开关和指示灯.

![PCB 布线](../图/20240207-10/2-kicad-2.jpg)

PCB 为 2 层设计, 长宽 60mm x 70mm, 板厚 1.6mm, 材质 FR-4,
铜厚 35um (1oz).
正面和背面都对地 (GND) 敷铜.
大电流的线路尽量使用宽走线.

下面介绍电路板功能的时候再详细说明各个设计.

### 2.2 嘉立创打样

![PCB 打样](../图/20240207-10/2-jlc-1.jpg)

焊接之后:

![焊接 (正面)](../图/20240207-10/2-pcba-1.jpg)
![焊接 (背面)](../图/20240207-10/2-pcba-2.jpg)

(焊接技术不好, 请见谅. )

### 2.3 电路板成本分析

注意: 此处的成本分析仅适用于少量制造, 仅供参考.

材料清单 (BOM) 如下:

| 序号 | 元件 | 数量 | 参考价格 (CNY) |
| :--: | :--- | ---: | -------------: |
| 1 | ATX 24 针插座 (4.2mm 间距) | 1 | 2.35 |
| 2 | xt60 插座 | 2 | 1.36 |
| 3 | xt30 插座 | 2 | 1.19 |
| 4 | USB-A 插座 (侧插 立式) | 4 | 0.53 |
| 5 | 排针 1x8 (2.54mm 间距) | 1 | 0.08 |
| 6 | 排针 2x8 (2.54mm 间距) | 5 | 0.20 |
| 7 | MSK-12D19 1P2T (拨动开关 3 脚) | 1 | 0.42 |
| 8 | LED (贴片 0805) | 1 | 0.09 |
| 9 | 电阻 (贴片 0805) | 1 | 0.02 |
| 总计 | 9 | 18 | 11.18 |

PCB 成本 1.25 元 (嘉立创 打样).
元件的一部分是可选的, 如果不需要可以不焊接.
所以元件成本范围 3.28 ~ 11.18 元,
总成本 4.6 ~ 12.5 元.


## 3 电路板功能及测试

此处使用的是一个普通的 (二手) 小功率 ATX 电源, 如图:

![ATX 电源](../图/20240207-10/30-atx-1.jpg)

供电输出能力: 12V 21A (252W), 5V 17A (85W), 3.3V 15A (49.5W),
+5VSB 2.5A (12.5W).

电源总功率约 300W, 便宜大碗.

### 3.1 电源开关与指示灯

ATX 24 针 (主板供电) 接口如图:

![ATX-24 原理图](../图/20240207-10/31-kicad-1.jpg)

供电部分有 3.3V, 5V, 12V, 接地 (GND).

![ATX-24 引脚图](../图/20240207-10/31-kicad-2.jpg)

还有 2 个重要的引脚: 16 号引脚 PS_ON, 9 号引脚 5VSB.

PS_ON 是电源开机信号, 低电平有效.
也就是说, 把 PS_ON 接地 (GND) 时, 电源开机, 断开则电源关机.

![开关部分原理图](../图/20240207-10/31-kicad-3.jpg)

电源开关用了一个 3 脚的拨动开关, 当拨动到下方时 PS_ON 和 GND 短接,
电源开机.
电源指示灯用了一个 0805 贴片 LED.

![电源关闭](../图/20240207-10/31-s-1.jpg)

如图, 右上角的电源开关拨动到上方时, 电源关闭, 电源指示灯不亮.

![电源开机](../图/20240207-10/31-s-2.jpg)

如图, 电源开关拨动到下方 (`ON` 标示位置) 时, 电源开机, 指示灯亮.

### 3.2 12V (xt60) 和 5V (xt30) 插座

![xt60 xt30](../图/20240207-10/32-kicad-1.jpg)

这是大功率 (大电流) 输出接口.
xt60 接口最大持续电流 30A, xt30 接口最大持续电流 15A.

功率较大的设备, 使用 12V 供电比 5V 更好,
因为功率一定时电流更小, 损耗更小.
所以把 xt60 分给 12V, 两个插座理论上最大可输出 60A (720W).
xt30 分给 5V, 两个插座理论上最大可输出 30A (150W).
12V 和 5V 分别使用不同的接口, 这是 **防插错** 设计, 防止意外接错.
3.3V 不适合用于大功率设备, 所以只给 3.3V 设计了排针输出.

![xt60 测试](../图/20240207-10/32-t-1.jpg)

使用万用表测量 xt60 插座.

![xt30 测试](../图/20240207-10/32-t-2.jpg)

使用万用表测量 xt30 插座.

----

![显示器电源](../图/20240207-10/32-m-1.jpg)

这个是显示器的电源, 输出 12V 2.5A (插头 DC 5.5x2.1mm).

![制作电源线 (1)](../图/20240207-10/32-w-1.jpg)

所以, 让我们来制作一条电源线吧 !
首先使用电烙铁 (焊锡) 焊接:

![制作电源线 (2)](../图/20240207-10/32-w-2.jpg)

然后使用 热缩套管.

![制作电源线 (3)](../图/20240207-10/32-w-3.jpg)

加热后.

![制作电源线 (4)](../图/20240207-10/32-w-4.jpg)

外层热缩套管.

![制作电源线 (5)](../图/20240207-10/32-w-5.jpg)

制作完成.

![制作电源线 (6)](../图/20240207-10/32-w-6.jpg)

另一头.

![制作电源线 (7)](../图/20240207-10/32-w-7.jpg)

制作完成 (热缩套管没有弄好).

----

香橙派 zero3 供电要求 5V 3A, 我们也来制作一条电源线吧 !

![制作电源线 (8)](../图/20240207-10/32-w-8.jpg)

xt30 转 USB-C 5V 供电线.

![测试接线](../图/20240207-10/32-t-3.jpg)

测试接线如图.

![测试供电成功](../图/20240207-10/32-t-4.jpg)

同时给显示器 (12V) 和香橙派 zero3 (5V) 供电 (两根黄线).
两个设备都工作正常, 测试成功.

### 3.3 5V USB-A 插座

![USB-A](../图/20240207-10/33-kicad-1.jpg)

在不使用快冲协议 (或 USB PD) 的情况下, USB 接口的默认供电电压为 5V.
为了低成本, 此处没有使用 USB PD 芯片, 所以只支持 5V 供电.
考虑到兼容性, 选择了 USB-A 接口 (而不是 USB-C).
目前更多设备使用 USB-A (虽然 USB-C 是未来趋势).

考虑到电路板空间 (面积), 此处设计了 4 个 USB-A 接口 (再多就塞不下了),
并且考虑了相邻接口之间的距离, 方便使用.
与标准的 USB-A 接口不同, 此处并没有对供电电流进行任何限制
(标准 USB-A 接口只支持 500mA 最大电流),
所以可能支持大电流供电 (尚未测试).

![测试充电](../图/20240207-10/33-t-1.jpg)

测试使用 USB-A (5V) 接口给手机充电.

### 3.4 排针 2.54mm 间距

![排针原理图](../图/20240207-10/34-kicad-1.jpg)

此处使用了 5 个 2x8 的 2.54mm 间距排针进行供电.
共有 16 个 3.3V, 16 个 5V, 16 个 12V, 32 个接地 (GND).

2.54mm 排针适用于小设备 (比如 单片机), 以及电路小实验.

![测试 3.3V](../图/20240207-10/34-t-1.jpg)

使用万用表测量 3.3V 排针.

![面包板测试](../图/20240207-10/34-t-2.jpg)

经典实验: 点亮一颗 LED !

### 3.5 螺丝孔 M2

此电路板有 4 个直径 2mm (M2) 的螺丝孔, 如果需要可以用螺丝固定.

![螺丝孔 (1)](../图/20240207-10/35-kicad-1.jpg)
![螺丝孔 (2)](../图/20240207-10/35-kicad-2.jpg)

螺丝孔距离板边分别为 3mm 和 16mm.

### 3.6 阻焊开窗 (堆锡) 和预留飞线位置 (大电流)

为了低成本, 此电路板使用 嘉立创 标准工艺 (铜厚 35um, 1oz) 制造.
这个铜厚较薄, 允许通过的最大电流有限, 可能难以支持大电流.
设计时考虑到这种情况, 所以一共设计了 3 级输出功率 (可能的工作情况):

+ (1) 小功率: 直接焊接元件使用即可.

+ (2) 大功率: 可以使用堆锡.

+ (3) 更大功率: 堆锡 + 粗导线飞线.

电路板的正面和背面各设计了一处阻焊开窗 (线路开窗),
可以用于堆锡, 如图:

![背面堆锡](../图/20240207-10/36-pcb-1.jpg)

+5V 这条线路进行了堆锡, 可以增大允许通过的电流.

![飞线设计](../图/20240207-10/36-pcb-2.jpg)

预留的飞线位置如图:
12V (白色), 5V (蓝色), GND (黑色).

如果需要更大的电流, 可以使用粗导线按照如图所示飞线.

### 3.7 扩展接口 (J-MCU)

![扩展接口原理图](../图/20240207-10/37-kicad-1.jpg)

这个 8 针 2.54mm 排针引出了 3.3V, 5V, 12V, GND,
PS_ON, 5VSB 等, 可用于未来扩展更多功能.

其中 5VSB (Stand-By) 在电源关闭时, 也会有供电输出.
其余供电在电源关闭时会关闭.


## 4 翻车

如果不出意外的话, 那就要出意外了.
果然, 第一次电路板打样翻车了 !

![水平间距](../图/20240207-10/4-atx-1.jpg)

ATX-24 针插座, 水平针脚间距 4.2mm, 这很正常是吧.

![垂直间距](../图/20240207-10/4-atx-2.jpg)

但是, 垂直间距 .. .
嗯 ??
怎么突然变成 5.6mm 了 !
这个也应该是 4.2mm 才对啊 !!

这个使用的是 KiCad 软件自带的封装库,
也没有注意这个问题.

于是, 打样的电路板, ATX-24 针插座装不上去 .. .


## 5 总结与展望

使用一块自制的电路板, 从 ATX 电源 24 针主板供电接口,
引出了 3.3V, 5V, 12V 供电.
大电流输出使用 xt60 (12V), xt30 (5V) 接口.
还有 USB-A (5V) 接口, 以及 2.54mm 排针.

能够给显示器 (12V), 香橙派 zero3 (5V) 供电.
能够给手机充电.
适用于电路小实验.
一块小小的电路板, 具有多种功能, 适用于多个场景.
总成本也很低, 对穷人友好.

在此基础上, 未来可以建设全屋小功率电子设备统一供电网络.
低压直流供电能够以更低的成本支持电池供电 (无需交流逆变器),
方便建设应急供电系统 (类似 UPS).
低压直流供电在安全性上,
也比 220V 交流市电好很多 (无需担心意外触电).
用全屋低压直流供电代替市电,
或许可以用于婴幼儿, 学校, 老人等安全敏感的场景.

期待一大堆电源适配器纷纷消失的那天早点到来 !

----

本文使用 CC-BY-SA 4.0 许可发布.
