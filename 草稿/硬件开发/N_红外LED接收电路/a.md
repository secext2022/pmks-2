# 红外 LED 接收电路 (ch32v003f4p6)

本文使用单个的红外 LED (红外对管) 进行光信号的接收,
而不是使用集成式红外接收头.

这是一个很简单的电路, 但是在网上却没有找到好的资料 (知识的荒漠),
所以写了本文.

本文使用单片机 ch32v003f4p6 内置的运算放大器,
并使用 ADC 采集电压.


## 目录

+ 1 电路工作原理

+ 2 面包板实验

+ 3 单片机测试

+ 附录 1: 单片机程序的完整代码


## 1 电路工作原理

红外 LED 接收电路有多种具体的方法, 本文使用的只是其中一种.

![原理图](./图/1-sch.png)

右半部分是一个基于运算放大器的放大电路, 可以先忽略.
先看左边的 D1 和 R1.

D1 是一个二极管, 反向偏置, 所以是截止状态, 电流接近 0.
没有光照的情况下, D1 的电流几乎为 0, 可以忽略不计.
电阻 R1 的电流也为 0, 所以电阻 R1 两端的电压为 0,
则 D1 上方的电压等于电源电压 5V.
考虑到右边运放, 则没有光照时 D1 的电压约为 4.77V.

受到光照时, D1 的电流明显增大, R1 的电流也随之增大,
所以 R1 两端的电压增大.
如果不考虑右边运放, 假设 D1 的电流为 1uA, 则 R1 的电压为 10mV.
也就是说, D1 的微小电流信号, 经过电阻 R1 的放大成为电压信号.

右边是一个运算放大器加上 4 个电阻构成的减法放大电路.
放大倍数为 10 倍, 也就是电源电压 5V 减去 D1 的电压, 再放大 10 倍.
相当于把 R1 的电压放大 10 倍.
比如 R1 的电压信号为 10mV, 则经过放大后最右边 `ADCIN` 电压为 100mV.

TODO


## 2 面包板实验

TODO


## 3 单片机测试

参考资料: <https://www.wch.cn/products/CH32V003.html>

TODO


## 附录 1: 单片机程序的完整代码

TODO
